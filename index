<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Alex's Family Resource Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="manifest.json" />

  <style>
    :root {
      --bg: #e0f2ff;
      --card-radius: 18px;
      --shadow-soft: 0 14px 40px rgba(15, 23, 42, 0.18);
      --text-main: #0f172a;
      --text-subtle: #64748b;
      --accent-blue: #2563eb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #e0f2ff 0, #eff6ff 40%, #dbeafe 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 20px 12px 28px;
    }

    .app {
      width: 100%;
      max-width: 720px;
      background: rgba(255, 255, 255, 0.92);
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      padding: 20px 18px 24px;
      backdrop-filter: blur(14px);
    }

    .header {
      margin-bottom: 18px;
    }

    .header-title {
      font-size: 1.3rem;
      margin: 0;
      color: var(--text-main);
    }

    .header-subtitle {
      margin: 6px 0 0;
      font-size: 0.9rem;
      color: var(--text-subtle);
    }

    .catchup {
      background: #0f172a;
      color: #e5f0ff;
      border-radius: 18px;
      padding: 14px 14px 12px;
      margin-bottom: 18px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.4);
    }

    .catchup-title {
      font-size: 0.98rem;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .catchup-title span.icon {
      font-size: 1.1rem;
    }

    .catchup-body {
      font-size: 0.85rem;
      color: #bfdbfe;
    }

    .catchup-link {
      margin-top: 6px;
      font-size: 0.82rem;
      text-decoration: underline;
      cursor: pointer;
      color: #e0f2fe;
    }

    .tiles-label {
      font-size: 0.9rem;
      color: var(--text-subtle);
      margin-bottom: 6px;
    }

    .tiles-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 20px;
    }

    @media (min-width: 640px) {
      .tiles-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .tile {
      border-radius: 16px;
      padding: 10px 10px 12px;
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      color: #ffffff;
      font-size: 0.9rem;
      font-weight: 500;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.25);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 4px;
      text-decoration: none;
    }

    .tile-secondary {
      background: linear-gradient(135deg, #059669, #16a34a);
    }

    .tile-accent {
      background: linear-gradient(135deg, #a855f7, #ec4899);
    }

    .tile-plain {
      background: #ffffff;
      color: var(--text-main);
      box-shadow: 0 8px 18px rgba(148, 163, 184, 0.4);
    }

    .tile-icon {
      font-size: 1.2rem;
    }

    .tile-label {
      font-size: 0.92rem;
    }

    .tile-caption {
      font-size: 0.75rem;
      opacity: 0.85;
    }

    .search-card {
      background: #ffffff;
      border-radius: 18px;
      padding: 12px 12px 14px;
      box-shadow: 0 10px 28px rgba(148, 163, 184, 0.35);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .search-label {
      font-size: 0.85rem;
      color: var(--text-subtle);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .search-label span.icon {
      font-size: 1.1rem;
    }

    .search-row {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .search-row input {
      flex: 1;
      padding: 9px 11px;
      border-radius: 999px;
      border: 1px solid #e2e8f0;
      font-size: 0.9rem;
      outline: none;
    }

    .search-row button {
      border-radius: 999px;
      border: none;
      padding: 9px 13px;
      background: var(--accent-blue);
      color: #fff;
      font-size: 0.85rem;
      cursor: pointer;
      white-space: nowrap;
    }

    .search-row button:active {
      transform: translateY(1px);
    }

    .results {
      margin-top: 6px;
      max-height: 260px;
      overflow-y: auto;
    }

    .result-item {
      padding: 7px 8px;
      border-radius: 10px;
      font-size: 0.86rem;
      display: flex;
      flex-direction: column;
      gap: 2px;
      cursor: pointer;
      text-decoration: none;
      color: var(--text-main);
    }

    .result-item:hover {
      background: #eff6ff;
    }

    .result-title {
      font-weight: 500;
    }

    .result-path {
      font-size: 0.76rem;
      color: #64748b;
    }

    .result-tags {
      font-size: 0.72rem;
      color: #9ca3af;
    }

    .footer {
      margin-top: 10px;
      font-size: 0.72rem;
      color: #94a3b8;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <h1 class="header-title">What would you like to do today?</h1>
      <p class="header-subtitle">
        This hub keeps Alex‚Äôs information, plans, and resources in one place.
      </p>
    </div>

    <!-- Catch-up / What You Missed -->
    <div class="catchup" id="catchupBox">
      <div class="catchup-title">
        <span class="icon">üì∞</span>
        <span>Catch up on what‚Äôs new</span>
      </div>
      <div class="catchup-body" id="catchupText">
        No recent updates recorded yet. When someone logs a note or change, it will show here.
      </div>
      <div class="catchup-link" onclick="openCatchupLog()">
        View update log
      </div>
    </div>

    <div class="tiles-label">Quick actions</div>

    <!-- Tile grid (2√ó2 on mobile, expands on desktop) -->
    <div class="tiles-grid">
      <!-- 1. Key Information & Access -->
      <a class="tile tile-accent" id="tile-key-info">
        <div class="tile-icon">üîë</div>
        <div class="tile-label">Key info & access</div>
        <div class="tile-caption">Logins, ID, contacts</div>
      </a>

      <!-- 2. Family Action Plan -->
      <a class="tile tile-secondary" id="tile-family-plan">
        <div class="tile-icon">üìã</div>
        <div class="tile-label">Family action plan</div>
        <div class="tile-caption">Steps, housing, next actions</div>
      </a>

      <!-- 3. Medical Care -->
      <a class="tile" id="tile-medical">
        <div class="tile-icon">üè•</div>
        <div class="tile-label">Medical care</div>
        <div class="tile-caption">Records, meds, labs</div>
      </a>

      <!-- 4. Behavioral Health & Recovery -->
      <a class="tile" id="tile-behavioral">
        <div class="tile-icon">‚ù§Ô∏è</div>
        <div class="tile-label">Behavioral health</div>
        <div class="tile-caption">Therapy, routines, crisis plan</div>
      </a>

      <!-- 5. Benefits & Government -->
      <a class="tile tile-plain" id="tile-benefits">
        <div class="tile-icon">üßæ</div>
        <div class="tile-label">Benefits & government</div>
        <div class="tile-caption">SSA, Medicaid, DSHS</div>
      </a>

      <!-- 6. Legal & Safeguards -->
      <a class="tile tile-plain" id="tile-legal">
        <div class="tile-icon">‚öñÔ∏è</div>
        <div class="tile-label">Legal & safeguards</div>
        <div class="tile-caption">POA, guardianship</div>
      </a>

      <!-- 7. History & Timeline -->
      <a class="tile tile-plain" id="tile-history">
        <div class="tile-icon">üï∞Ô∏è</div>
        <div class="tile-label">History & timeline</div>
        <div class="tile-caption">Big-picture overview</div>
      </a>

      <!-- 8. Resource Library -->
      <a class="tile tile-plain" id="tile-resources">
        <div class="tile-icon">üìö</div>
        <div class="tile-label">Resource library</div>
        <div class="tile-caption">Guides, worksheets, extras</div>
      </a>

      <!-- 9. Contacts -->
      <a class="tile tile-secondary" id="tile-contacts">
        <div class="tile-icon">üìû</div>
        <div class="tile-label">Contact & support</div>
        <div class="tile-caption">Who to call for what</div>
      </a>

      <!-- 10. Search focus -->
      <a class="tile tile-accent" id="tile-search-focus">
        <div class="tile-icon">üîç</div>
        <div class="tile-label">Search the hub</div>
        <div class="tile-caption">Find any doc or folder</div>
      </a>
    </div>

    <!-- Search section -->
    <div class="search-card">
      <div class="search-label">
        <span class="icon">üîç</span>
        <span>I'm looking for‚Ä¶</span>
      </div>
      <div class="search-row">
        <input
          id="searchInput"
          type="text"
          placeholder="Try words like login, meds, crisis, SSA‚Ä¶"
        />
        <button type="button" onclick="handleSearch()">Search</button>
      </div>
      <div id="results" class="results"></div>
    </div>

    <div class="footer">
      Alex‚Äôs Family Resource Hub ‚Äî private family tool.
    </div>
  </div>

  <script>
    // 1) Password gate: only allow access if logged in
    if (localStorage.getItem("alexHubAuthed") !== "true") {
      window.location.href = "auth.html";
    }

    // 2) Google Drive URLs: REPLACE THESE with your real folder/doc links
    const LINKS = {
      keyInfoFolder: "https://drive.google.com/drive/folders/REPLACE_KEY_INFO",
      familyActionPlanDoc: "https://docs.google.com/document/d/REPLACE_FAMILY_PLAN",
      familyMeetingNotesDoc: "https://docs.google.com/document/d/REPLACE_MEETING_NOTES",
      familyActionPlanFolder: "https://drive.google.com/drive/folders/REPLACE_FAMILY_PLAN_FOLDER",
      medicalCareFolder: "https://drive.google.com/drive/folders/REPLACE_MEDICAL_CARE",
      behavioralHealthFolder: "https://drive.google.com/drive/folders/REPLACE_BEHAVIORAL_HEALTH",
      benefitsFolder: "https://drive.google.com/drive/folders/REPLACE_BENEFITS",
      legalFolder: "https://drive.google.com/drive/folders/REPLACE_LEGAL",
      historyFolder: "https://drive.google.com/drive/folders/REPLACE_HISTORY",
      resourceLibraryFolder: "https://drive.google.com/drive/folders/REPLACE_RESOURCES",
      contactsDoc: "https://docs.google.com/document/d/REPLACE_CONTACTS",
      catchupLogDoc: "https://docs.google.com/document/d/REPLACE_CATCHUP_LOG"
    };

    // 3) Resource index for search
    const RESOURCES = [
      // 1. Key info & access
      {
        title: "Alex ‚Äì Key Info & Access",
        category: "Key Information & Access",
        url: LINKS.keyInfoFolder,
        path: "1. Key Information & Access",
        tags: ["login", "access", "id", "insurance", "contacts", "portal"]
      },
      {
        title: "Insurance cards",
        category: "Key Information & Access",
        url: LINKS.keyInfoFolder,
        path: "1. Key Information & Access",
        tags: ["insurance", "card", "coverage"]
      },

      // 2. Family action plan
      {
        title: "Family Action Plan",
        category: "Family Action Plan",
        url: LINKS.familyActionPlanDoc,
        path: "2. Family Action Plan",
        tags: ["plan", "actions", "safety", "housing", "steps"]
      },
      {
        title: "Family Meeting Notes",
        category: "Family Action Plan",
        url: LINKS.familyMeetingNotesDoc,
        path: "2. Family Action Plan",
        tags: ["meeting", "notes", "summary", "updates"]
      },
      {
        title: "Housing Options & Applications",
        category: "Family Action Plan",
        url: LINKS.familyActionPlanFolder,
        path: "2. Family Action Plan",
        tags: ["housing", "applications", "sha", "mfte"]
      },

      // 3. Medical care
      {
        title: "Medical Records",
        category: "Medical Care",
        url: LINKS.medicalCareFolder,
        path: "3. Medical Care",
        tags: ["records", "doctor", "hospital", "uw", "harborview"]
      },
      {
        title: "Medication List",
        category: "Medical Care",
        url: LINKS.medicalCareFolder,
        path: "3. Medical Care",
        tags: ["medication", "prescriptions", "dose", "lithium"]
      },
      {
        title: "Lab Results",
        category: "Medical Care",
        url: LINKS.medicalCareFolder,
        path: "3. Medical Care",
        tags: ["labs", "bloodwork", "results"]
      },

      // 4. Behavioral health
      {
        title: "Crisis Plan",
        category: "Behavioral Health & Recovery",
        url: LINKS.behavioralHealthFolder,
        path: "4. Behavioral Health & Recovery",
        tags: ["crisis", "safety", "plan"]
      },
      {
        title: "Therapy & Provider List",
        category: "Behavioral Health & Recovery",
        url: LINKS.behavioralHealthFolder,
        path: "4. Behavioral Health & Recovery",
        tags: ["therapy", "counselor", "provider", "support"]
      },
      {
        title: "Redpoint & Other Facilities",
        category: "Behavioral Health & Recovery",
        url: LINKS.behavioralHealthFolder,
        path: "4. Behavioral Health & Recovery",
        tags: ["facility", "program", "treatment"]
      },

      // 5. Benefits & government
      {
        title: "Disabled Adult Child ‚Äì SSA",
        category: "Benefits & Government Programs",
        url: LINKS.benefitsFolder,
        path: "5. Benefits & Government Programs",
        tags: ["ssa", "benefits", "disabled adult child", "dac"]
      },
      {
        title: "SSI / SSDI Information",
        category: "Benefits & Government Programs",
        url: LINKS.benefitsFolder,
        path: "5. Benefits & Government Programs",
        tags: ["ssi", "ssdi", "income", "benefit"]
      },
      {
        title: "Medicaid / Apple Health",
        category: "Benefits & Government Programs",
        url: LINKS.benefitsFolder,
        path: "5. Benefits & Government Programs",
        tags: ["medicaid", "apple health", "insurance"]
      },

      // 6. Legal & safeguards
      {
        title: "Power of Attorney & Guardianship",
        category: "Legal & Safeguards",
        url: LINKS.legalFolder,
        path: "6. Legal & Safeguards",
        tags: ["poa", "guardianship", "legal", "authority"]
      },
      {
        title: "HIPAA Releases",
        category: "Legal & Safeguards",
        url: LINKS.legalFolder,
        path: "6. Legal & Safeguards",
        tags: ["hipaa", "release", "privacy"]
      },

      // 7. History & timeline
      {
        title: "Alex‚Äôs History & Timeline",
        category: "Alex‚Äôs History & Timeline",
        url: LINKS.historyFolder,
        path: "7. Alex‚Äôs History & Timeline",
        tags: ["history", "timeline", "background"]
      },

      // 8. Resource library
      {
        title: "Resource Library",
        category: "Resource Library",
        url: LINKS.resourceLibraryFolder,
        path: "8. Resource Library",
        tags: ["resources", "articles", "education", "guides"]
      },

      // Contacts
      {
        title: "Contact & Support List",
        category: "Contacts & Support",
        url: LINKS.contactsDoc,
        path: "Contacts",
        tags: ["contact", "phone", "email", "case manager", "family"]
      }
    ];

    // Tile click behavior
    function openInNewTab(urlKey) {
      const url = LINKS[urlKey];
      if (!url || url.includes("REPLACE_")) {
        alert("This link hasn‚Äôt been set up yet. Add the real Google Drive link in index.html.");
        return;
      }
      window.open(url, "_blank", "noopener,noreferrer");
    }

    document.getElementById("tile-key-info").onclick = function () {
      openInNewTab("keyInfoFolder");
    };
    document.getElementById("tile-family-plan").onclick = function () {
      openInNewTab("familyActionPlanDoc");
    };
    document.getElementById("tile-medical").onclick = function () {
      openInNewTab("medicalCareFolder");
    };
    document.getElementById("tile-behavioral").onclick = function () {
      openInNewTab("behavioralHealthFolder");
    };
    document.getElementById("tile-benefits").onclick = function () {
      openInNewTab("benefitsFolder");
    };
    document.getElementById("tile-legal").onclick = function () {
      openInNewTab("legalFolder");
    };
    document.getElementById("tile-history").onclick = function () {
      openInNewTab("historyFolder");
    };
    document.getElementById("tile-resources").onclick = function () {
      openInNewTab("resourceLibraryFolder");
    };
    document.getElementById("tile-contacts").onclick = function () {
      openInNewTab("contactsDoc");
    };
    document.getElementById("tile-search-focus").onclick = function () {
      document.getElementById("searchInput").focus();
    };

    function openCatchupLog() {
      openInNewTab("catchupLogDoc");
    }

    // Search
    function handleSearch() {
      const input = document.getElementById("searchInput");
      const query = input.value.trim().toLowerCase();
      const resultsEl = document.getElementById("results");
      resultsEl.innerHTML = "";

      if (!query) return;

      const matches = RESOURCES.filter((item) => {
        const haystack =
          (item.title + " " + item.category + " " + (item.tags || []).join(" ")).toLowerCase();
        return haystack.includes(query);
      });

      if (!matches.length) {
        resultsEl.innerHTML =
          '<div class="result-item"><div class="result-title">No matches yet.</div><div class="result-path">Try another word like ‚Äúlogin‚Äù, ‚Äúcrisis‚Äù, ‚Äútherapy‚Äù, ‚ÄúSSA‚Äù, or ‚Äúnotes‚Äù.</div></div>';
        return;
      }

      matches.forEach((item) => {
        const link = document.createElement("a");
        link.className = "result-item";
        link.href = item.url;
        link.target = "_blank";
        link.rel = "noopener noreferrer";

        const title = document.createElement("div");
        title.className = "result-title";
        title.textContent = item.title;

        const path = document.createElement("div");
        path.className = "result-path";
        path.textContent = item.path + " ¬∑ " + item.category;

        const tags = document.createElement("div");
        tags.className = "result-tags";
        tags.textContent = (item.tags || []).join(" ¬∑ ");

        link.appendChild(title);
        link.appendChild(path);
        link.appendChild(tags);
        resultsEl.appendChild(link);
      });
    }

    document.getElementById("searchInput").addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        e.preventDefault();
        handleSearch();
      }
    });

    // Placeholder catch-up text: you can manually update this later
    const catchupText = document.getElementById("catchupText");
    // Example manual update:
    // catchupText.textContent = "‚Ä¢ Nov 20: Redpoint submitted housing application.\n‚Ä¢ Nov 19: Updated crisis plan.";
  </script>
</body>
</html>
